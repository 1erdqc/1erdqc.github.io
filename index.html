<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SM-T561/60</title>

<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400&display=swap" rel="stylesheet">

<style>
html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    background: black;
    font-family: "Noto Sans", sans-serif;
    overflow: hidden;
    color: white;
}

#clock {
    position: fixed; /* absolute yerine fixed */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%); /* ortalama i√ßin */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

#time { display: flex; gap: 24px; }

.digit { width: 90px; height: 200px; position: relative; text-align: center; }
.prev, .current, .next { position: absolute; width: 100%; left: 0; font-variant-numeric: tabular-nums; }
.prev { top: 0; font-size: 48px; opacity: 0.15; }
.current { top: 50%; transform: translateY(-50%); font-size: 96px; font-weight: 300; }
.next { bottom: 0; font-size: 48px; opacity: 0.15; }

.separator { font-size: 96px; line-height: 200px; opacity: 0.8; }
#date { margin-top: 25px; font-size: 32px; opacity: 0.8; }

#device-info {
    position: fixed; top: 12px; right: 14px;
    font-size: 14px; line-height: 1.4;
    opacity: 0.65; text-align: right;
    font-variant-numeric: tabular-nums;
}

#weather-info {
    position: fixed; top: 12px; left: 14px;
    font-size: 14px; line-height: 1.4;
    opacity: 0.9;
    display: flex;
    flex-direction: column;
    gap: 2px;
}
.weather-line {
    display: flex;
    align-items: center;
    gap: 6px;
}
.weather-line span { white-space: nowrap; }
</style>
</head>

<body>

<div id="weather-info">Y√ºkleniyor‚Ä¶</div>
<div id="device-info"></div>

<div id="clock">
    <div id="time"></div>
    <div id="date"></div>
</div>

<script>
// Flip-style saat
function pad(n) { return n.toString().padStart(2, "0"); }
function createDigit(value, max) {
    const v = Number(value);
    const prev = (v - 1 + max) % max;
    const next = (v + 1) % max;
    return `
        <div class="digit">
            <div class="prev">${pad(prev)}</div>
            <div class="current">${pad(v)}</div>
            <div class="next">${pad(next)}</div>
        </div>
    `;
}

function updateClock() {
    const now = new Date();

    const h = now.toLocaleTimeString("tr-TR", { timeZone: "Europe/Istanbul", hour:"2-digit" });
    const m = now.toLocaleTimeString("tr-TR", { timeZone: "Europe/Istanbul", minute:"2-digit" });
    const s = now.toLocaleTimeString("tr-TR", { timeZone: "Europe/Istanbul", second:"2-digit" });

    document.getElementById("time").innerHTML =
        createDigit(h,24)+`<div class="separator">:</div>`+
        createDigit(m,60)+`<div class="separator">:</div>`+
        createDigit(s,60);

    document.getElementById("date").textContent =
        now.toLocaleDateString("tr-TR", {
            timeZone: "Europe/Istanbul",
            weekday:"long", day:"numeric",
            month:"long", year:"numeric"
        });
}

setInterval(updateClock,1000);
updateClock();

// Cihaz + pil
const di = document.getElementById("device-info");
function setDeviceInfo(text, isLow=false) {
    di.textContent=text;
    di.style.color=isLow?"#ff4d4d":"rgba(255,255,255,0.65)";
}
function baseInfo(extra=""){
    return [navigator.platform||"Unknown",`${screen.width}√ó${screen.height}`,Intl.DateTimeFormat().resolvedOptions().timeZone,extra]
        .filter(Boolean).join(" ¬∑ ");
}

if(navigator.getBattery){
    navigator.getBattery().then(batt=>{
        function upd(){
            const p=Math.round(batt.level*100);
            setDeviceInfo(baseInfo(`${batt.charging?"‚ö°":"üîã"} ${p}%`), !batt.charging && p<15);
        }
        upd();
        batt.addEventListener("levelchange",upd);
        batt.addEventListener("chargingchange",upd);
    });
}else setDeviceInfo(baseInfo());

// Hava durumu
const wEl = document.getElementById("weather-info");
const LAT = 41.0602;
const LON = 28.9877;

function mapWeatherCode(code){
    const emojiMap = {
        0:"‚òÄÔ∏è",1:"üå§Ô∏è",2:"‚õÖ",3:"‚òÅÔ∏è",
        45:"üå´Ô∏è",48:"üå´Ô∏è",
        51:"üå¶Ô∏è",53:"üå¶Ô∏è",55:"üåßÔ∏è",
        61:"üåßÔ∏è",63:"üåßÔ∏è",65:"üåßÔ∏è",
        71:"‚ùÑÔ∏è",73:"‚ùÑÔ∏è",75:"‚ùÑÔ∏è",
        80:"üå¶Ô∏è",81:"üåßÔ∏è",82:"üåßÔ∏è",
        95:"‚õàÔ∏è",99:"‚õàÔ∏è"
    };
    return emojiMap[code] || "‚ùì";
}

function updateWeather(){
    fetch(`https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&current_weather=true&timezone=Europe/Istanbul`)
    .then(res=>res.json())
    .then(data=>{
        if(data.current_weather){
            const w = data.current_weather;
            const icon = mapWeatherCode(w.weathercode);
            const temp = Math.round(w.temperature);
            const wind = Math.round(w.windspeed);
            const apparent = Math.round(w.apparent_temperature || w.temperature);

            wEl.innerHTML = `
                <div class="weather-line"><span>${icon} ${temp}¬∞C</span></div>
                <div class="weather-line"><span>üí® R√ºzgar: ${wind} km/h</span></div>
                <div class="weather-line"><span>üå°Ô∏è Hissedilen: ${apparent}¬∞C</span></div>
            `;
        } else { wEl.textContent = "Hava verisi yok"; }
    })
    .catch(()=>{ wEl.textContent = "Hava y√ºklenemedi"; });
}

updateWeather();
setInterval(updateWeather,30*60*1000);
</script>

</body>
</html>
